<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Popup CSS Fixes</title>
    <link rel="stylesheet" href="popup.css">
    <style>
        /* Additional test styles */
        body {
            padding: 20px;
        }
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }
        .test-title {
            color: #fff;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: bold;
        }
        .test-container {
            width: 320px;
            margin: 0 auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px;
            background: var(--color-primary-dark);
        }
    </style>
</head>
<body>
    <div class="test-section">
        <h2 class="test-title">Test 1: Options Menu Z-Index</h2>
        <div class="test-container">
            <p style="color: #fff; margin-bottom: 10px;">The dropdown should appear above all other elements:</p>
            
            <!-- Simulate a highlight item with options menu -->
            <div class="highlight-item">
                <div class="highlight-color-indicator" style="background-color: #ffe066;"></div>
                <div class="highlight-content">
                    <div class="highlight-text">Sample highlighted text</div>
                    <div class="highlight-metadata">
                        <span class="highlight-timestamp">2 hours ago</span>
                    </div>
                </div>
                <div class="highlight-actions">
                    <button class="highlight-action-btn copy-btn">Copy</button>
                    <button class="highlight-action-btn delete-btn">Delete</button>
                    <div class="options-menu-container">
                        <button class="options-menu-btn" onclick="toggleDropdown(this)">•••</button>
                        <div class="options-dropdown" style="display: none;">
                            <button class="options-menu-item">Pin to Top</button>
                            <button class="options-menu-item">Archive</button>
                            <button class="options-menu-item">Copy Link</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- High z-index overlay to test -->
            <div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(255, 0, 0, 0.3); padding: 20px; z-index: 1000; display: none;" id="testOverlay">
                This has z-index: 1000<br>
                Options menu should appear above this
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2 class="test-title">Test 2: Hover Effects</h2>
        <div class="test-container">
            <p style="color: #fff; margin-bottom: 10px;">Hover should not create transform artifacts:</p>
            
            <!-- Multiple highlight items to test hover -->
            <div class="highlights-list">
                <div class="highlight-item">
                    <div class="highlight-color-indicator" style="background-color: #6ee7b7;"></div>
                    <div class="highlight-content">
                        <div class="highlight-text">First highlight - hover me!</div>
                        <div class="highlight-metadata">
                            <span class="highlight-timestamp">1 hour ago</span>
                        </div>
                    </div>
                    <div class="highlight-actions">
                        <button class="highlight-action-btn copy-btn">C</button>
                        <button class="highlight-action-btn delete-btn">D</button>
                    </div>
                </div>
                
                <div class="highlight-item">
                    <div class="highlight-color-indicator" style="background-color: #93c5fd;"></div>
                    <div class="highlight-content">
                        <div class="highlight-text">Second highlight - no jump on hover!</div>
                        <div class="highlight-metadata">
                            <span class="highlight-timestamp">3 hours ago</span>
                        </div>
                    </div>
                    <div class="highlight-actions">
                        <button class="highlight-action-btn copy-btn">C</button>
                        <button class="highlight-action-btn delete-btn">D</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function toggleDropdown(button) {
            const dropdown = button.nextElementSibling;
            const isOpen = dropdown.style.display === 'block';
            dropdown.style.display = isOpen ? 'none' : 'block';
            
            // Show test overlay when dropdown opens
            const overlay = document.getElementById('testOverlay');
            overlay.style.display = isOpen ? 'none' : 'block';
        }
        
        // Close dropdowns when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.options-menu-container')) {
                document.querySelectorAll('.options-dropdown').forEach(d => {
                    d.style.display = 'none';
                });
                document.getElementById('testOverlay').style.display = 'none';
            }
        });
    </script>
</body>
</html>